; Script generated by the Inno Setup Script Wizard.
; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!

#define BaseDir "..\"
#define MyAppName "appname"
#define MyAppVersion "4.2"
#define MyAppPublisher "ZenToad Games"
#define MyAppURL "https://url"
#define MyAppExeName "rogue.exe"

[Setup]
; NOTE: The value of AppId uniquely identifies this application.
; Do not use the same AppId value in installers for other applications.
; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)
AppId={{A3211E1F-D1A1-4151-838C-C95A11CCE019}
AppName={#MyAppName}
AppVersion={#MyAppVersion}
;AppVerName={#MyAppName} {#MyAppVersion}
AppPublisher={#MyAppPublisher}
AppPublisherURL={#MyAppURL}
AppSupportURL={#MyAppURL}
AppUpdatesURL={#MyAppURL}
DefaultDirName={pf}\dirname
DefaultGroupName={#MyAppName}
OutputDir={#BaseDir}\Installation
OutputBaseFilename=InstallFileName.{#MyAppVersion}
SetupIconFile={#BaseDir}\support\import1.ico
Compression=lzma
ChangesAssociations=yes
SolidCompression=yes
LicenseFile={#BaseDir}\support\license.txt

[Languages]
Name: "english"; MessagesFile: "compiler:Default.isl"

[Tasks]
Name: "desktopicon"; Description: "{cm:CreateDesktopIcon}"; GroupDescription: "{cm:AdditionalIcons}"; Flags: unchecked

[Files]
Source: "{#BaseDir}\file1.bat"; DestDir: "{app}"; Flags: ignoreversion 
Source: "{#BaseDir}\file1.bat"; DestDir: "{app}"; Flags: ignoreversion 
Source: "{#BaseDir}\file1.bat"; DestDir: "{app}"; Flags: ignoreversion 
Source: "{#BaseDir}\file1.bat"; DestDir: "{app}"; Flags: ignoreversion 
Source: "{#BaseDir}\support\file1.bat"; DestDir: "{sys}"; DestName: "file1.bat"; Flags: sharedfile uninsnosharedfileprompt 64bit
Source: "{#BaseDir}\support\file1.bat"; DestDir: "{sys}"; DestName: "file1.bat"; Flags: sharedfile uninsnosharedfileprompt 64bit
Source: "{#BaseDir}\support\file1.bat"; DestDir: "{sys}"; DestName: "file1.bat"; Flags: sharedfile uninsnosharedfileprompt 64bit
Source: "{#BaseDir}\support\file1.bat"; DestDir: "{sys}"; DestName: "file1.bat"; Flags: sharedfile uninsnosharedfileprompt 64bit
Source: "{#BaseDir}\support\file1.bat"; DestDir: "{sys}"; DestName: "file1.bat"; Flags: sharedfile uninsnosharedfileprompt 64bit
Source: "{#BaseDir}\jre\*"; DestDir: "{app}\jre"; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "{#BaseDir}\lib\*"; DestDir: "{app}\lib"; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "{#BaseDir}\bin\*"; DestDir: "{app}\bin"; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "{#BaseDir}\support\*"; DestDir: "{app}\support"; Flags: ignoreversion recursesubdirs createallsubdirs
; NOTE: Don't use "Flags: ignoreversion" on any shared system files

[Icons]
Name: "{group}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; IconFilename: "{app}\support\Transparent.ico"
Name: "{group}\{cm:UninstallProgram,{#MyAppName}}"; Filename: "{uninstallexe}"; IconFilename: "{app}\support\delete.ico"
Name: "{commondesktop}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Tasks: desktopicon; IconFilename: "{app}\support\Transparent.ico"

[Registry]
; Set the PATH
Root: HKCU; Subkey: "Environment"; ValueType: expandsz; ValueName: "NAME"; ValueData: "{app}"; Flags: preservestringtype uninsdeletekey
Root: HKCR; Subkey: ".ext"; ValueType: string; ValueName: ""; ValueData:
"guidata"; Flags: uninsdeletevalue


[Setup]
ChangesEnvironment=yes

[Run]
Filename: "{app}\{#MyAppExeName}"; Description: "{cm:LaunchProgram,{#StringChange(MyAppName, '&', '&&')}}"; Flags: shellexec postinstall skipifsilent


